#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ .env

echo "üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–∞..."

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º IP –∞–¥—Ä–µ—Å
if [[ "$OSTYPE" == "linux-gnu"* ]]; then
    # Linux
    IP=$(hostname -I | awk '{print $1}')
elif [[ "$OSTYPE" == "darwin"* ]]; then
    # macOS
    IP=$(ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}' | head -n 1)
elif [[ "$OSTYPE" == "msys" || "$OSTYPE" == "cygwin" ]]; then
    # Windows (Git Bash)
    IP=$(ipconfig | grep "IPv4" | awk '{print $14}' | head -n 1)
else
    echo "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –û–°. –£–∫–∞–∂–∏ IP –≤—Ä—É—á–Ω—É—é."
    exit 1
fi

if [ -z "$IP" ]; then
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å IP –∞–¥—Ä–µ—Å."
    echo "üí° –£–∫–∞–∂–∏ IP –≤—Ä—É—á–Ω—É—é –≤ .env —Ñ–∞–π–ª–µ"
    exit 1
fi

echo "‚úÖ –ù–∞–π–¥–µ–Ω IP: $IP"
echo ""
echo "üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:"
echo ""
echo "# –î–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:"
echo "REACT_APP_API_URL=http://$IP:5000/api"
echo "REACT_APP_WS_URL=ws://$IP:5000"
echo "CLIENT_URL=http://$IP:3000"
echo ""
echo "üí° –ò–ª–∏ –æ—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://$IP:3000"
echo "   –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç IP –∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è API"

